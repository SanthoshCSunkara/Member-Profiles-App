/* src/webparts/memberProfiles/components/MemberProfiles.module.scss */
@use 'sass:color';

/* ---------- Design tokens ---------- */
$accent-fallback: #114461; /* used when --accent is not provided */
$accent-soft: #{rgba($accent-fallback, .10)};

:root {
  --ink-1: #0f172a;
  --ink-3: #64748b;
  --surface: #ffffff;
  --bg: #f5f6f8;    /* page background */
  --gap: 8px;       /* spacing between cards */
}

/* ---------- Page shell ---------- */
.wrapper {
  background: var(--bg);
  padding: 24px 0 32px;
  min-height: 200px;
  font-family:
    "Segoe UI Variable Display","Segoe UI Variable Text",
    "Segoe UI","Segoe UI Web (West European)",
    system-ui,-apple-system,BlinkMacSystemFont,Roboto,Helvetica,Arial,sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  color: #0f2135;
}

/* ---------- Header ---------- */
.container { max-width: 1200px; margin: 0 auto; padding: 0 12px; }

.headingWrap { display: grid; justify-items: center; gap: 6px; margin-bottom: 10px; }

.heading {
  margin: 0;
  font-weight: 800;
  color: var(--accent, #{$accent-fallback});
  font-size: clamp(28px, 4vw, 42px);
  line-height: 1.1;
  text-align: center;
}

.subtitle {
  color: #2f5e86;
  font-size: clamp(14px, 2.4vw, 20px);
  text-align: center;
  margin: 0;
}

/* ---------- Search row (Fluent SearchBoxes sit inside) ---------- */
.searchRow {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  margin: 20px auto 16px auto;
  max-width: 1100px;
}

/* ---------- Card grid ---------- */
/* --- Auto-fit card grid (final) --- */
.grid {
  display: grid !important;
  gap: var(--gap);
  /* Grow columns instead of forcing a skinny 3rd column */
  --card-min: 320px;
  grid-template-columns: repeat(auto-fit, minmax(var(--card-min), 1fr)) !important;
  grid-auto-rows: min-content;
  align-items: start;

  max-width: 1200px;
  margin: 12px auto;
  padding: 0 12px;
}

/* Guard against any legacy overrides */
@media (min-width: 0) {
  .grid {
    grid-template-columns: repeat(auto-fit, minmax(var(--card-min), 1fr)) !important;
  }
}

/* Prevent children from expanding grid due to long text */
.grid > * { min-width: 0; }

/* ---------- Generic card (kept for legacy MemberCard if still used)
   PortraitCard has its own module styles; both can peacefully co-exist. */
.card {
  position: relative;
  border: 1px solid #e6eef6;
  border-radius: 12px;
  background: var(--surface);
  box-shadow: 0 2px 10px rgba(0,0,0,.06);
  transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease, background-color .12s ease;
  cursor: pointer;
  overflow: hidden;
  text-align: left;
}

.card:hover {
  /* No transform; just a subtle shadow / border color if you want */
  transform: none;
  filter: none;
  box-shadow: 0 8px 20px rgba(0,0,0,.08);
  border-color: var(--accent, #114461);
}


.cardActive,
.card:focus,
.card:focus-within {
  outline: 3px solid var(--accent, #{$accent-fallback});
  outline-offset: 0;
  background-color: #{rgba($accent-fallback, .06)};
  box-shadow: 0 10px 22px #{rgba($accent-fallback, .15)};
}

/* Small row layout used by legacy cards */
.row { display: flex; gap: 12px; padding: 12px 14px; align-items: center; }
.avatar { width: 96px; height: 96px; border-radius: 50%; background: #2d3748; overflow: hidden; flex: 0 0 96px; }
.avatar img { width: 100%; height: 100%; object-fit: cover; display: block; }

/* Typography inside legacy cards */
.meta { min-width: 0; display: flex; flex-direction: column; gap: 4px; }
.name {
  font-weight: 700;
  color: #0f2135;
  font-size: clamp(16px, 1.6vw, 20px);
  line-height: 1.25;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
  letter-spacing: .2px;
}
.role {
  font-size: clamp(13px, 1.2vw, 16px);
  color: #5a6a7a;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.viewMoreInline { margin-top: 4px; font-weight: 700; color: var(--accent, #{$accent-fallback}); font-size: clamp(12px, 1.1vw, 14px); }

/* ---------- Loading state ---------- */
.loading { color: var(--ink-3); padding: 18px; text-align: center; }

/* ---------- Modal ---------- */
.modalContainer {
  width: min(1120px, 96vw);
  margin: 5vh auto;
  background: var(--surface);
  border-radius: 14px;
  overflow: hidden;
  box-shadow: 0 10px 40px rgba(0,0,0,.18);
  max-height: 90vh;
}

.modalHeader {
  display: flex; align-items: center; justify-content: space-between;
  padding: 12px 16px; border-bottom: 1px solid #edf2f7;
}
.modalTitle {
  font-weight: 800; color: var(--accent, #{$accent-fallback});
  font-size: clamp(20px, 2.5vw, 28px); line-height: 1.2;
}

.modalBody {
  display: grid; grid-template-columns: 340px 1fr;
  gap: 24px; padding: 16px;
}
@media (max-width: 900px) {
  .modalBody { grid-template-columns: 1fr; }
}

.modalLeft { min-width: 0; overflow: hidden; }
.modalCard {
  border: 1px solid #e5e7eb; border-radius: 12px; padding: 14px;
  box-shadow: 0 2px 8px rgba(0,0,0,.06);
  background: var(--surface);
}
.modalName { font-weight: 800; font-size: clamp(18px, 2.4vw, 22px); color: #0f2135; text-align: center; }
.modalRole { font-size: 14px; color: #5a6a7a; text-align: center; margin-top: 2px; }

.modalMeta {
  margin: 10px 0 12px;
  display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; color:#355;
  font-size: 14px;
}
.modalMeta :global(.ms-Icon) { margin-right: 6px; }

.btnRow { display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; margin: 4px 0 10px; }
.btnGhost {
  display: inline-flex; align-items: center; gap: 8px;
  padding: 6px 12px; border-radius: 999px; text-decoration: none;
  border: 1px solid var(--accent, #{$accent-fallback});
  color: var(--accent, #{$accent-fallback});
  background: #fbfbfc;
  font-weight: 700; font-size: 13px;
}
.btnGhost:hover { filter: brightness(0.96); }

.modalImage {
  width: 100%; height: auto; border-radius: 10px; display: block; margin-top: 10px;
  max-height: 420px; object-fit: cover;
}

.modalRight { min-width: 0; overflow: hidden; }
.detailsHtml {
  font-size: clamp(14px, 2vw, 16px);
  line-height: 1.65;
  color: #0f2135;
}
.detailsHtml :global(h3),
.detailsHtml :global(h4) {
  color: var(--accent, #{$accent-fallback});
  margin: 14px 0 8px; font-weight: 800;
}
.detailsHtml :global(p) { margin: 0 0 12px; }
.detailsHtml :global(ul) { margin: 0 0 12px; padding-left: 22px; }
.detailsHtml :global(li) { margin: 4px 0; }
